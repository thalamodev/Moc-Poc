version: '3.8'

services:
  backend:
    build:
      context: ./Backend/Thalamo.Gsp.Emoc
      dockerfile: Thalamo.Gsp.Emoc.Services/Dockerfile
    ports:
      - "8090:8090"
    environment:
      - ASPNETCORE_ENVIRONMENT=Development
      # Update this connection string to point to your SQL MI
      - ConnectionStrings__DefaultConnection=Server=YOUR_SQL_MI_ADDRESS;Database=GspEmocDb;User Id=YOUR_USER;Password=YOUR_PASSWORD;TrustServerCertificate=True;
      - AzureAd__ClientId=YOUR_CLIENT_ID
      - AzureAd__TenantId=YOUR_TENANT_ID

  frontend:
    build:
      context: ./Frontend
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - NEXT_PUBLIC_API_URL=https://localhost:7078
      - NEXT_PUBLIC_AI_WEBHOOK_URL=https://n8n.srv1155402.hstgr.cloud/webhook-test/9519330f-64bc-41c8-bc8d-e370be7e6431
    depends_on:
      - backend
